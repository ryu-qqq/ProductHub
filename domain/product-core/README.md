# 도메인 모듈

## 개요
도메인 레이어는 애플리케이션의 핵심 비즈니스 로직을 담당하는 계층으로, **비즈니스 규칙과 데이터 처리 규칙을 캡슐화**합니다. 각 도메인은 해당 비즈니스의 주체로, 상태와 로직을 일관되게 관리하고 유효한 상태를 유지하는 역할을 합니다.

---

## 규칙 및 원칙

### 1. 도메인의 역할과 책임
- **비즈니스 로직 캡슐화**: 도메인 레이어는 상품 등록, 수정, 조회 등과 관련된 모든 비즈니스 규칙을 캡슐화합니다.
- **데이터 무결성 유지**: 필드 간 일관성 및 데이터 무결성을 보장하기 위해 필요한 로직을 도메인 엔티티에서 정의합니다.
- **상태 관리**: 도메인 객체는 자신이 포함하는 데이터의 상태를 관리하고, 상태 변경에 따른 규칙을 포함하여 항상 유효한 상태를 유지합니다.

### 2. 도메인과 프레젠테이션 레이어 분리
- **도메인 레이어에서 모든 비즈니스 로직을 처리한 후, 결과를 프레젠테이션 레이어에 전달**합니다.
- 프레젠테이션 레이어에서 필요한 형식에 맞춰 데이터를 전달하기 위해, 조회용 데이터는 **조회용 DTO로 변환**하여 반환합니다.
- **프레젠테이션 레이어는 도메인 객체의 상태를 직접 변경하지 않으며**, 도메인 레이어의 비즈니스 로직을 통해 데이터 변경을 수행합니다.

### 3. 조회와 수정의 분리
- **조회용 DTO는 `record` 타입으로 작성**하고, 불변 객체로 유지합니다.
- **수정용 DTO는 클래스로 작성**하여 필요한 필드 수정 및 유효성 검증 로직을 포함합니다.
- 조회와 수정 시 필요한 필드가 다를 수 있으므로, 각 용도에 맞는 DTO를 작성하고 **도메인 레코드를 프레젠테이션 전용 DTO로 변환하여 사용**합니다.

### 4. 네이밍 규칙
- **조회용 레코드**: 도메인 레코드 DTO는 `도메인 이름 + Record`로 명명하여 사용합니다. 예: `ProductRecord`, `CategoryRecord`.
- **프레젠테이션 DTO**: 프레젠테이션 레이어에서 반환할 객체는 `도메인 이름 + Response`로 명명합니다. 예: `ProductDetailResponse`, `ProductSummaryResponse`.
- **컨텍스트 객체**: 여러 개의 조회용 레코드를 조합하여 반환할 경우, **`도메인 이름 + Context`**로 명명하여 사용합니다. 예: `ProductContext`, `CategoryContext`.

---

## 코딩 컨벤션

### 1. 레코드 타입과 클래스 타입의 사용
- **조회용 객체**: 불변성을 보장하기 위해 `record` 타입을 사용합니다. 조회 시에는 프레젠테이션 레이어로 필요한 데이터를 안전하게 전달합니다.
- **수정용 객체**: 비즈니스 로직 검증과 데이터 조작이 필요한 경우 클래스를 사용하여 필요한 로직을 메서드로 추가합니다.

### 2. 조회와 수정용 DTO
- **조회용 DTO**: 도메인 엔티티의 정보를 가공 없이 프레젠테이션 레이어에 전달하기 위해 사용됩니다.
- **수정용 DTO**: 수정 가능한 필드만 포함하며, 내부 비즈니스 로직과 유효성 검증 로직을 포함하여 도메인 엔티티를 안전하게 수정할 수 있도록 합니다.

### 3. 레이어 간 데이터 전달 방식
- 도메인 레이어는 도메인 객체 및 레코드를 통해 필요한 데이터와 비즈니스 로직을 캡슐화합니다.
- 프레젠테이션 레이어로 전달되는 데이터는 **DTO로 변환**하여 필요한 데이터만 전달합니다.
- **직접적인 도메인 객체 노출을 지양**하며, 조회용 또는 수정용 DTO를 통해 데이터가 일관되게 전달될 수 있도록 합니다.

---
